<html>
<head>
  <script src="js/marked.js"></script>
  <script src="js/jquery.js"></script>
  <link rel="stylesheet" type="text/css" href="markitup/skins/simple/style.css">
  <!--  markItUp! toolbar skin -->
  <link rel="stylesheet" type="text/css" href="markitup/sets/markdown/style.css">
  <script type="text/javascript" src="markitup/jquery.markitup.js"></script>
  <!-- markItUp! toolbar settings -->
  <script type="text/javascript" src="markitup/sets/markdown/set.js"></script>

  <style>
    div#html.edit-mode {
      display: none;
    } 
    div#markItUpMarkdown.view-mode {
      display: none;
    }
    div#markItUpMarkdown.fullscreen {
      width: 48%;
      height: 100%;
      float: left;
    }
    div#html.fullscreen {
      width:48%;
      float: right;
    }
    div.menu {
      background-color: #fff;
    }
    div.menu a.selected {
      display:none;
    }
    div.menu a {
      font-weight: bold;
      background-color: #eee;
    }
  </style>  
</head>
<body>
<div class="menu">
  <a class="fullscreen">full screen</a> <a class="edit">edit mode</a> <a class="view selected">view mode</a>
</div>
<textarea id="markdown">
#Header

* Bullet
* Next

Paragraph

Paragraph
</textarea>
<div id="html" class="view-mode">
</div>
<script>
  var md = $('textarea#markdown');
  var html = $('div#html');
  var convert = function() {
    html.html(marked($('textarea#markdown').val()));
  };
  mySettings.previewFunction = convert;
  md.markItUp(mySettings);
  mde = $('div#markItUpMarkdown');
  mde.addClass('view-mode');
  var fsb = $('a.fullscreen');
  var eb = $('a.edit');
  var vb =  $('a.view');
  fsb.on('click', function(){
    html.addClass('fullscreen').removeClass('edit-mode').removeClass('view-mode');
    mde.addClass('fullscreen').removeClass('edit-mode').removeClass('view-mode');
    fsb.addClass('selected');
    eb.removeClass('selected');
    vb.removeClass('selected');
  });
  eb.on('click', function(){
    html.addClass('edit-mode').removeClass('fullscreen').removeClass('view-mode');
    mde.addClass('edit-mode').removeClass('fullscreen').removeClass('view-mode');
    eb.addClass('selected');
    fsb.removeClass('selected');
    vb.removeClass('selected');
  });
  vb.on('click', function(){
    html.addClass('view-mode').removeClass('fullscreen').removeClass('edit-mode');
    mde.addClass('view-mode').removeClass('fullscreen').removeClass('edit-mode');
    vb.addClass('selected');
    fsb.removeClass('selected');
    eb.removeClass('selected');
  });
  md.on('change keyup paste', convert);
  convert();
</script>
</body>
</html>
